@if (detailedProduct) {
<div
  class="relative flex flex-col md:flex-row items-center justify-center gap-8 p-6 bg-white dark:bg-gray-900 shadow-lg dark:shadow-lg rounded-xl max-w-7xl mx-auto border border-transparent dark:border-gray-700 transition-colors duration-200"
>
  <button
    (click)="goBack()"
    class="absolute top-5 right-5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700 p-2 rounded-full shadow transition-colors"
    aria-label="Go back"
  >
    <i class="fa fa-arrow-left text-lg"></i>
  </button>

  <div class="w-full md:w-2/5 flex justify-center items-center">
    <img
      [src]="detailedProduct.imageCover"
      [alt]="detailedProduct.title"
      class="product-image-hover w-full h-auto max-h-[420px] object-contain rounded-lg border border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/40 shadow-sm transition-transform duration-150"
    />
  </div>

  <div
    class="w-full md:w-3/5 flex flex-col justify-center space-y-6 text-center md:text-left"
  >
    <div>
      <h1
        class="text-2xl md:text-3xl font-semibold text-gray-800 dark:text-gray-100"
      >
        {{ detailedProduct.title }}
      </h1>
      <p class="text-gray-600 dark:text-gray-300 mt-3 leading-relaxed">
        {{ detailedProduct.description }}
      </p>
    </div>

    <div
      class="flex flex-col md:flex-row items-center justify-between flex-wrap gap-3"
    >
      <div>
        <p
          class="text-gray-500 text-sm uppercase tracking-wide dark:text-gray-400"
        >
          {{ detailedProduct.category.name }}
        </p>
        <p class="text-lg font-bold text-green-600 dark:text-green-400 mt-1">
          {{ detailedProduct.price | currency : "GBP" }}
        </p>
      </div>

      <div class="flex items-center gap-1 text-yellow-400 text-sm">
        @for (i of [1, 2, 3, 4, 5]; track i) {
        <i
          [class]="
            detailedProduct.ratingsAverage >= i
              ? 'fas fa-star'
              : detailedProduct.ratingsAverage >= i - 0.5
              ? 'fas fa-star-half-alt'
              : 'far fa-star'
          "
        ></i>
        }
        <span class="text-gray-700 dark:text-gray-200 font-medium text-sm ml-1">
          {{ detailedProduct.ratingsAverage | number : "1.1-1" }}
        </span>
      </div>
    </div>

    <div class="flex items-center gap-3 mt-4">
      <button
        (click)="addToCart(detailedProduct.id)"
        class="flex-1 bg-green-600 dark:bg-green-500 hover:bg-green-700 dark:hover:bg-green-600 text-white py-3 rounded-md font-medium flex justify-center items-center gap-2 transition-colors duration-200 active:scale-95"
      >
        <i class="fa fa-cart-shopping"></i>
        Add to cart
      </button>
      <button
        type="button"
        (click)="toggleWishlist(detailedProduct.id)"
        class="p-3 rounded-md font-medium flex justify-center items-center gap-2 transition-all duration-200 active:scale-95"
        [ngClass]="
          isInWishlist()
            ? 'bg-pink-600 hover:bg-pink-700 text-white'
            : 'bg-gray-200 hover:bg-pink-500 text-gray-600 dark:bg-gray-700 dark:hover:bg-pink-600 dark:text-gray-300'
        "
      >
        <i
          class="text-2xl transition-transform duration-300"
          [ngClass]="
            isInWishlist()
              ? 'fa fa-heart text-white scale-110'
              : 'fa fa-heart text-gray-600'
          "
        ></i>
      </button>
    </div>
  </div>
</div>
}
